{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/style_reportes.css') }}">
{% endblock %}

{% block content %}
<h1 class="block-effect" style="--td:0.3s">
    <div class="block-reveal" style="--bc: #2b3034; --d: 0.5s">Reportes</div>
</h1>

<div class="head">
    <div class="filtros">
        <form method="get" action="{{ url_for('reportes') }}" id="filtro-form">
            <div class="filtro">
                <input class="form-control me-2" type="search" name="search"
                    placeholder="Buscar por Asunto del Reporte" aria-label="Search"
                    value="{{ request.args.get('search', '') }}">
                <button class="btn btn-success" type="submit">Buscar</button>
            </div>
        </form>
    </div>
    <div class="Botones_Reportes">
        <!-- <div>
            <a href="{{ url_for('reporte_1') }}" class="button_slide slide_left">
                <img id="agregar" src="{{ url_for('static', filename='img/icon-agregar-usuario.png') }}" alt="icon-agregar"
                    width="30px">
                <b>Crear Nuevo Reporte 1</b>
            </a>
        </div> -->
        <div class="reporte_2">
            <a href="{{ url_for('reporte_2') }}" class="button_slide slide_left">
                <img id="agregar" src="{{ url_for('static', filename='img/icon-agregar.png') }}" alt="icon-agregar"
                    width="30px">
                <b>Crear Nuevo Reporte</b>
            </a>
        </div>
    </div>
</div>

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div class="mt-3">
    {% for category, message in messages %}
    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}
{% endwith %}

<!-- Mostrar reportes -->
{% if reportes %}
<div class="mt-3">
    {% for reporte in reportes %}
    <div class="alert alert-light d-flex justify-content-between align-items-center" role="alert">
        <div class="listReport">
            <strong> <a href="{{ url_for('ver_reporte', id_reporte=reporte['id_reporte']) }}"  id="verReporte">Asunto: {{ reporte['asunto'] }}</a></strong>
            <h6>{{ reporte['usuario_id'] }}</h6>
            <p>Fecha: {{ reporte['fecha'] }} </p>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="alert alert-danger" role="alert">
    No existen reportes.
</div>
{% endif %}

{% endblock %}
